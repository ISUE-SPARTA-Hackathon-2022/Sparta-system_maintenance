{% extends 'layout.html' %}
{% block content %}
<div class="container p-2 gradient">
    <div class="row mx-auto">
        <div class="col-6 p-2">
            <div class="MediaDevice row mx-auto h-100 rounded ratio ratio-4x3" style="background-color: rgba(80, 80, 126, 0.65);">
                <video id="vid" class="rounded"></video><br>
            </div>
        </div>
        <div class="col-6 p-2"><br>
            <div class="row mx-auto">
                <h3 class="text-center text-white">Classication and Quality Sorting Application</h3><br>
                <label id="status" class="text-center">Awaiting Model To Load</label>
            </div><br>
            <div class="row">
                <div class="col input-group">
                    <label class="input-group-text">Classification</label>
                    <input type="text" class="form-control" name="Classification" id="ml_class" readonly>
                </div>
                <div class="col input-group">
                    <label class="input-group-text">Quality</label>
                    <input type="text" class="form-control" name="quality" id="" readonly>
                </div>
            </div><br>
            <div class="row">
                <div class="col input-group">
                    <label class="input-group-text">Name</label>
                    <input type="text" class="form-control" name="name" id="" readonly>
                </div>
                <div class="col input-group">
                    <label class="input-group-text">Type</label>
                    <input type="text" class="form-control" name="type" id="" readonly>
                </div>
            </div><br>
            <div class="row">
                <div class="col input-group">
                    <label class="input-group-text">P-Color</label>
                    <input type="text" class="form-control" name="primarycolor" id="" readonly>
                </div>
                <div class="col input-group">
                    <label class="input-group-text">S-Color</label>
                    <input type="text" class="form-control" name="secondarycolor" id="" readonly>
                </div>
            </div><br>
            <div class="row">
                <div class="col">
                    <button id="but" class="btn btn-primary" autoplay>
                        Open Cam
                    </button>
                </div>
            </div><br>
            <div class="row">
                <div class="col input-group">
                    <label class="input-group-text">Device ID:</label>
                    <input type="text" class="form-control" name="deviceID" id="" readonly>
                </div>
            </div><br>
            <div class="row">
                <div class="col input-group">
                    <label class="input-group-text">group ID:</label>
                    <input type="text" class="form-control" name="groupID" id="" readonly>
                </div>
            </div><br>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
      var but = document.getElementById("but");
      var video = document.getElementById("vid");
      var mediaDevices = navigator.mediaDevices;
      vid.muted = true;
      but.addEventListener("click", () => {

        // Accessing the user camera and video.
        mediaDevices
          .getUserMedia({
            video: true,
            audio: true,
          })
          .then((stream) => {

            // Changing the source of video to current stream.
            video.srcObject = stream;
            video.addEventListener("loadedmetadata", () => {
              video.play();
            });
          })
          .catch(alert);
      });
    });
</script>
{% endblock %}